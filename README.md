# djangotutorial

## Build a basic website with Django.

Tutorial link : https://tutorial.djangogirls.org/en/


## Virtual environnement

It isolate your Python/Django setup on a per-project basis,any changes you make to one website won't affect any others you're also developing.

* Create new virtual environnement

```python
python3 -m venv myvenv
```

* Activating the virtual environnement 

```python
myvenv\Scripts\activate
```

## Django project 

* Create a new Django project :

```python
django-admin.exe startproject mysite 
```

* Concerning the files in **mysite** : 
 ** *manage.py* is a script that helps with the management of the site
 ** *settings.py* is a file that contains the configuration of your website

* Create a database : 

```python
python manage.py migrate
```

* Starting the web server :

```python
python manage.py runserver
```

* Create a separate application inside our project :

```python
python manage.py startapp blog
```

Next step : add *app* into **settings.py > INSTALLED_APPS**

* Create models in **app/models.py** 

* Create new model in DB :

```python
python manage.py makemigrations blog
python manage.py migrate blog
```

To add, edit and delete the elements we've just modeled, we will use Django admin, in **app/admin.py**


* Create superuser :

```python
python manage.py createsuperuser
```

* URL management : redirect URL to views with regex

* **views/py** : where the logic is, request info from the model, pass it to a template, can do computing  


## Django ORM and QuerySets
How Django connects to the database and stores data in it. QuerySets allows you to read the data from the database, filter it and order it.

* Display Django shell :

```python
python manage.py shell
```

* Display objects : 

```
from blog.models import Post
Post.objects.all()
```

* Create objects : 

```
from django.contrib.auth.models import User
User.objects.all()
me = User.objects.get(username='mathieu') # mathieu is superuser
Post.objects.create(author=me, title='Sample title', text='Test')
```

* Query filter : 

```
Post.objects.filter(author=me)
Post.objects.filter(title__contains='title')
from django.utils import timezone
Post.objects.filter(published_date__lte=timezone.now())
```

* Get an element and execute a method : 

```
post = Post.objects.get(title="Sample title")
post.publish()
```

* Ordering objects

```
Post.objects.order_by('created_date')
Post.objects.order_by('-created_date')
```

* Chaining querysets

```
Post.objects.filter(published_date__lte=timezone.now()).order_by('published_date')
```

## Templates

* To print a variable in Django templates, we use double curly brackets : 

```
{{ posts }}
```

* Python code in html template :

```
{% for post in posts %}
    <div></div>
{% endfor %}
```

* *{% %}* is Django template tags

## Static & CSS

Static files are in **app/static**


## Base template 

A basic template that you can extend on every page of your website.

* Location : app/templates/app/ 

In base template :

```
{% block content %}
{% endblock %}
```

Is an area that will have html inserted in it and comes from another template that extends base template

Wrap the extension with : 

```
{% block content %}
{% endblock %}
```

To connect these two add an extend tag at the beginning of the extend html file :

{% extends 'blog/base.html' %}

* *pk* = post.pk primary key generated by Django, field pk to each element : element.pk 


## Steps to add a feature, a page : 

1. Add URL
1. Add view
1. Add template

## URL parameters

* Get url parameters

```
from django.shortcuts import get_object_or_404
post = get_object_or_404(Post, pk=pk) # in the view function with parameters (request, pk)
```

* In **urls.py**: 

```
url(r'^post/(?P<pk>\d+)/edit/$', views.post_edit, name='post_edit')
(?P<pk>\d+) 
```

Allows to capture a number in the URL into the variable pk


## Forms 

1. Create file forms.py 
1. Follow the steps to create a feature (URL, view, template)














